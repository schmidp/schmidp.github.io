<!DOCTYPE html>
<!--[if lte IE 8]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gte IE 9]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="Description" content="Philipp Schmid is a developer and entrepreneur located in Vienna, Austria. This is his personal space.">
  <meta name="google-site-verification" content="OwEgvJ1S4h-P6_sfyS6CtaMAHZkX9Pu44kwH_RxKuRg" />

  <title>philipp schmid - Rails MySQL and Leopard</title>
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="alternate" type="application/rss+xml" title="Philipp Schmid" href="http://www.schmidp.com/feed.xml">
  <!--[if lt IE 9]><script src="/js/vend/respond.min.js"></script><![endif]-->
</head>


<body>
<div class="page-container container">
  <aside class="page-sidebar">
    <nav class="navbar" role="navigation">
  <div class="navbar-header">
    <button type="button" class="navbar-toggle">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
    <h3 class="blog-title">philipp schmid</h3>
  </div>

  <div class="navbar-collapse">
    <ul class="nav navbar-nav">
      <li><a href="/">index</a></li>
      <li><a href="/imprint">imprint</a></li>
      <li class="gap-bottom"><a href="https://github.com/schmidp/schmidp.github.io/tree/master/public">files</a></li>
      <li><a href="http://evil.io" title="evil.io">evil.io</a></li>
      <li><a href="http://www.openresearch.com" title="openresearch">openresearch</a></li>
    </ul>

    <ul class="nav navbar-nav">
      <li><em>philipp schmid</em></li>
      <li class="gap-bottom"><a href="mailto:schmidp@schmidp.com">schmidp@schmidp.com</a></a></li>
      <li><a href="https://www.instagram.com/schmidphilipp">instagram/schmidphilipp</a></li>
      <li><a href="https://youtube.com/schmidp">youtube/schmidp</a></li>
      <li><a href="https://twitter.com/schmidp">twitter/schmidp</a></li>
      <li><a href="https://github.com/schmidp">github/schmidp</a></li>
    </ul>
  </div>
</nav>

  </aside>

  <article class="page-content">
    <div class="post" itemscope itemtype="http://schema.org/BlogPosting">
      <h2>
        <span itemprop="name headline">Rails MySQL and Leopard</span>
      </h2>

      <div class="post-meta">
        <span class="post-date" itemprop="datePublished">
          29 Sep 2007
        </span>
        by
        <span itemprop="author">
          Philipp Schmid
        </span>
        -
        <span>
          193 words
        </span>
      </div>

      <div class="post-content" itemprop="articleBody">
        <p><strong>UPDATE:</strong></p>

<p>I didnâ€™t know about the ARCHFLAGS environment variable, which is a less intrusive way (thanks to Sebastian for pointing this out):</p>

<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nb">sudo </span>su -
<span class="nv">ARCHFLAGS</span><span class="o">=</span><span class="s1">'-arch i386'</span> gem install mysql <span class="nt">--</span> <span class="nt">--with-mysql-config</span><span class="o">=</span>/usr/local/mysql/bin/mysql_config</code></pre></figure>

<p>(sudo su - asks you for your normal password, not the root password)</p>

<strike>I'm using the stock Ruby environment on Leopard and the MySQL package from http://www.mysql.com.
Unfortunately, installing the MySQL driver as a gem doesn't work out of the box, and the default MySQL driver that comes with Rails seems to be quite buggy.

To get it working we have to remove all occurrences of "-arch ppc" in rbconfig.rb; otherwise, it tries to compile the MySQL driver for the PowerPC Platform as well, which we don't want (assuming you have an Intel Mac - otherwise remove "-arch i386").

We also have to tell the driver where to find the the MySQL libs, includes and so on. We can do this by specifying the path for the mysql_config command.


<figure class="highlight"><pre><code class="language-sh" data-lang="sh"><span class="nb">cd</span> /usr/lib/ruby/1.8/universal-darwin9.0/
<span class="nb">sudo </span>mv rbconfig.rb rbconfig.rb.orig
<span class="nb">sudo </span>sed <span class="s2">"s/-arch ppc//g"</span> rbconfig.rb.orig <span class="o">&gt;</span> rbconfig.rb
<span class="nb">sudo </span>gem install mysql <span class="nt">--</span> <span class="nt">--with-mysql-config</span><span class="o">=</span>/usr/local/mysql/bin/mysql_config</code></pre></figure>


(If you use a PPC Mac, replace ppc with i386 on line 2.)
</strike>

      </div>

      <p class="post-comments">
        
            <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'schmidp';
      
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        
      </p>


    </div>
  </article>
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/js/vend/jquery.min.js"><\/script>')</script>
<script>
  $(function() {
    $(".navbar-toggle").click(function(){
      $(".navbar-collapse").slideToggle().toggleClass('active');
    });
  });
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-60133-1', 'auto');
  ga('require', 'displayfeatures');
  ga('send', 'pageview');

</script>

</body>
</html>
